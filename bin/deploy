#!/usr/bin/env ruby

APP_ROOT = "#{File.dirname(File.expand_path(__FILE__))}/.."

$: << "#{APP_ROOT}/lib"

recipe  = ARGV[0]
env     = ARGV[1]
command = ARGV[2]

exit if ARGV.size < 3

require "deploy/config"
require "deploy/base"
require "deploy/remote_commands"
require "deploy/recipies/#{recipe}"

c = ::Deploy::Config.new

c.set :env, env
c.config_environment

r = eval("::Deploy::Recipies::#{recipe[0,1].upcase}#{recipe[1,recipe.size - 1]}")

r.send(command.to_sym, c)

r.push!
